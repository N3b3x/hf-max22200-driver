# MAX22200 ASCII Diagrams

This document contains ASCII art diagrams illustrating the MAX22200 IC architecture, register layout, and driver structure.

## Table of Contents

- [IC Block Diagram](#ic-block-diagram)
- [Channel Architecture](#channel-architecture)
- [Register Map](#register-map)
- [SPI Communication](#spi-communication)
- [Driver Architecture](#driver-architecture)
- [Current Regulation Modes](#current-regulation-modes)
- [Bridge Configurations](#bridge-configurations)

## IC Block Diagram

```
                    MAX22200 IC Block Diagram
    ┌─────────────────────────────────────────────────────────────┐
    │                                                             │
    │  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐     │
    │  │   Channel   │    │   Channel   │    │   Channel   │     │
    │  │      0      │    │      1      │    │      2      │     │
    │  └─────────────┘    └─────────────┘    └─────────────┘     │
    │         │                   │                   │          │
    │  ┌──────▼──────┐    ┌──────▼──────┐    ┌──────▼──────┐     │
    │  │ Half-Bridge │    │ Half-Bridge │    │ Half-Bridge │     │
    │  │   Driver    │    │   Driver    │    │   Driver    │     │
    │  └─────────────┘    └─────────────┘    └─────────────┘     │
    │         │                   │                   │          │
    │  ┌──────▼──────┐    ┌──────▼──────┐    ┌──────▼──────┐     │
    │  │    OUT0     │    │    OUT1     │    │    OUT2     │     │
    │  └─────────────┘    └─────────────┘    └─────────────┘     │
    │                                                             │
    │  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐     │
    │  │   Channel   │    │   Channel   │    │   Channel   │     │
    │  │      3      │    │      4      │    │      5      │     │
    │  └─────────────┘    └─────────────┘    └─────────────┘     │
    │         │                   │                   │          │
    │  ┌──────▼──────┐    ┌──────▼──────┐    ┌──────▼──────┐     │
    │  │ Half-Bridge │    │ Half-Bridge │    │ Half-Bridge │     │
    │  │   Driver    │    │   Driver    │    │   Driver    │     │
    │  └─────────────┘    └─────────────┘    └─────────────┘     │
    │         │                   │                   │          │
    │  ┌──────▼──────┐    ┌──────▼──────┐    ┌──────▼──────┐     │
    │  │    OUT3     │    │    OUT4     │    │    OUT5     │     │
    │  └─────────────┘    └─────────────┘    └─────────────┘     │
    │                                                             │
    │  ┌─────────────┐    ┌─────────────┐                        │
    │  │   Channel   │    │   Channel   │                        │
    │  │      6      │    │      7      │                        │
    │  └─────────────┘    └─────────────┘                        │
    │         │                   │                              │
    │  ┌──────▼──────┐    ┌──────▼──────┐                        │
    │  │ Half-Bridge │    │ Half-Bridge │                        │
    │  │   Driver    │    │   Driver    │                        │
    │  └─────────────┘    └─────────────┘                        │
    │         │                   │                              │
    │  ┌──────▼──────┐    ┌──────▼──────┐                        │
    │  │    OUT6     │    │    OUT7     │                        │
    │  └─────────────┘    └─────────────┘                        │
    │                                                             │
    │  ┌─────────────────────────────────────────────────────────┐ │
    │  │                Control Logic                            │ │
    │  │  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐   │ │
    │  │  │ Current │  │ Voltage │  │ Timing  │  │  Fault  │   │ │
    │  │  │ Control │  │ Control │  │ Control │  │ Detect  │   │ │
    │  │  └─────────┘  └─────────┘  └─────────┘  └─────────┘   │ │
    │  └─────────────────────────────────────────────────────────┘ │
    │                                                             │
    │  ┌─────────────────────────────────────────────────────────┐ │
    │  │                SPI Interface                            │ │
    │  │  ┌─────┐  ┌─────┐  ┌─────┐  ┌─────┐  ┌─────┐  ┌─────┐ │ │
    │  │  │ MOSI│  │ MISO│  │ SCLK│  │  CS │  │ VCC │  │ GND │ │ │
    │  │  └─────┘  └─────┘  └─────┘  └─────┘  └─────┘  └─────┘ │ │
    │  └─────────────────────────────────────────────────────────┘ │
    └─────────────────────────────────────────────────────────────┘
```

## Channel Architecture

```
                    Single Channel Architecture
    ┌─────────────────────────────────────────────────────────────┐
    │                                                             │
    │  ┌─────────────────────────────────────────────────────────┐ │
    │  │                Channel Control                          │ │
    │  │  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐   │ │
    │  │  │ Enable  │  │ Drive   │  │ Bridge  │  │Parallel │   │ │
    │  │  │ Control │  │ Mode    │  │ Mode    │  │ Mode    │   │ │
    │  │  └─────────┘  └─────────┘  └─────────┘  └─────────┘   │ │
    │  └─────────────────────────────────────────────────────────┘ │
    │                                                             │
    │  ┌─────────────────────────────────────────────────────────┐ │
    │  │                Current Control                          │ │
    │  │  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐   │ │
    │  │  │  HIT    │  │  HOLD   │  │ Current │  │ Current │   │ │
    │  │  │ Current │  │ Current │  │ Sense   │  │ Limit   │   │ │
    │  │  └─────────┘  └─────────┘  └─────────┘  └─────────┘   │ │
    │  └─────────────────────────────────────────────────────────┘ │
    │                                                             │
    │  ┌─────────────────────────────────────────────────────────┐ │
    │  │                Timing Control                           │ │
    │  │  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐   │ │
    │  │  │  HIT    │  │  HOLD   │  │  PWM    │  │  Timer  │   │ │
    │  │  │  Time   │  │  Time   │  │ Control │  │ Control │   │ │
    │  │  └─────────┘  └─────────┘  └─────────┘  └─────────┘   │ │
    │  └─────────────────────────────────────────────────────────┘ │
    │                                                             │
    │  ┌─────────────────────────────────────────────────────────┐ │
    │  │                Half-Bridge Driver                       │ │
    │  │                                                         │ │
    │  │  ┌─────────┐                    ┌─────────┐             │ │
    │  │  │   High  │                    │   Low   │             │ │
    │  │  │  Side   │                    │  Side   │             │ │
    │  │  │ Driver  │                    │ Driver  │             │ │
    │  │  └─────────┘                    └─────────┘             │ │
    │  │      │                              │                  │ │
    │  │      └────────────┬─────────────────┘                  │ │
    │  │                   │                                    │ │
    │  │  ┌────────────────▼────────────────┐                   │ │
    │  │  │            Output               │                   │ │
    │  │  │         (OUT0-OUT7)             │                   │ │
    │  │  └─────────────────────────────────┘                   │ │
    │  └─────────────────────────────────────────────────────────┘ │
    │                                                             │
    │  ┌─────────────────────────────────────────────────────────┐ │
    │  │                Protection & Diagnostics                │ │
    │  │  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐   │ │
    │  │  │   OCP   │  │   OL    │  │   DPM   │  │  UVLO   │   │ │
    │  │  │ (Over-  │  │ (Open   │  │(Plunger │  │(Under-  │   │ │
    │  │  │ current)│  │ Load)   │  │Movement)│  │ voltage)│   │ │
    │  │  └─────────┘  └─────────┘  └─────────┘  └─────────┘   │ │
    │  │  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐   │ │
    │  │  │   HHF   │  │   TSD   │  │  Fault  │  │  Status │   │ │
    │  │  │ (HIT    │  │(Thermal │  │ Register│  │ Register│   │ │
    │  │  │ Current)│  │Shutdown)│  │         │  │         │   │ │
    │  │  └─────────┘  └─────────┘  └─────────┘  └─────────┘   │ │
    │  └─────────────────────────────────────────────────────────┘ │
    └─────────────────────────────────────────────────────────────┘
```

## Register Map

```
                    MAX22200 Register Map
    ┌─────────────────────────────────────────────────────────────┐
    │                                                             │
    │  ┌─────────────────────────────────────────────────────────┐ │
    │  │              Control Registers                         │ │
    │  │  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐   │ │
    │  │  │ 0x00    │  │ 0x01    │  │ 0x02    │  │ 0x03    │   │ │
    │  │  │Global   │  │Channel  │  │Fault    │  │Fault    │   │ │
    │  │  │Config   │  │Enable   │  │Status   │  │Mask     │   │ │
    │  │  └─────────┘  └─────────┘  └─────────┘  └─────────┘   │ │
    │  │  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐   │ │
    │  │  │ 0x04    │  │ 0x05    │  │ 0x06    │  │ 0x07    │   │ │
    │  │  │Diagnostic│  │Reserved │  │Reserved │  │Reserved │   │ │
    │  │  └─────────┘  └─────────┘  └─────────┘  └─────────┘   │ │
    │  └─────────────────────────────────────────────────────────┘ │
    │                                                             │
    │  ┌─────────────────────────────────────────────────────────┐ │
    │  │            Channel Configuration Registers              │ │
    │  │  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐   │ │
    │  │  │ 0x10    │  │ 0x11    │  │ 0x12    │  │ 0x13    │   │ │
    │  │  │CH0      │  │CH1      │  │CH2      │  │CH3      │   │ │
    │  │  │Config   │  │Config   │  │Config   │  │Config   │   │ │
    │  │  └─────────┘  └─────────┘  └─────────┘  └─────────┘   │ │
    │  │  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐   │ │
    │  │  │ 0x14    │  │ 0x15    │  │ 0x16    │  │ 0x17    │   │ │
    │  │  │CH4      │  │CH5      │  │CH6      │  │CH7      │   │ │
    │  │  │Config   │  │Config   │  │Config   │  │Config   │   │ │
    │  │  └─────────┘  └─────────┘  └─────────┘  └─────────┘   │ │
    │  └─────────────────────────────────────────────────────────┘ │
    │                                                             │
    │  ┌─────────────────────────────────────────────────────────┐ │
    │  │              Current Control Registers                  │ │
    │  │  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐   │ │
    │  │  │ 0x20    │  │ 0x21    │  │ 0x22    │  │ 0x23    │   │ │
    │  │  │CH0      │  │CH1      │  │CH2      │  │CH3      │   │ │
    │  │  │Current  │  │Current  │  │Current  │  │Current  │   │ │
    │  │  └─────────┘  └─────────┘  └─────────┘  └─────────┘   │ │
    │  │  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐   │ │
    │  │  │ 0x24    │  │ 0x25    │  │ 0x26    │  │ 0x27    │   │ │
    │  │  │CH4      │  │CH5      │  │CH6      │  │CH7      │   │ │
    │  │  │Current  │  │Current  │  │Current  │  │Current  │   │ │
    │  │  └─────────┘  └─────────┘  └─────────┘  └─────────┘   │ │
    │  └─────────────────────────────────────────────────────────┘ │
    │                                                             │
    │  ┌─────────────────────────────────────────────────────────┐ │
    │  │              Timing Control Registers                   │ │
    │  │  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐   │ │
    │  │  │ 0x30    │  │ 0x31    │  │ 0x32    │  │ 0x33    │   │ │
    │  │  │CH0      │  │CH1      │  │CH2      │  │CH3      │   │ │
    │  │  │Timing   │  │Timing   │  │Timing   │  │Timing   │   │ │
    │  │  └─────────┘  └─────────┘  └─────────┘  └─────────┘   │ │
    │  │  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐   │ │
    │  │  │ 0x34    │  │ 0x35    │  │ 0x36    │  │ 0x37    │   │ │
    │  │  │CH4      │  │CH5      │  │CH6      │  │CH7      │   │ │
    │  │  │Timing   │  │Timing   │  │Timing   │  │Timing   │   │ │
    │  │  └─────────┘  └─────────┘  └─────────┘  └─────────┘   │ │
    │  └─────────────────────────────────────────────────────────┘ │
    └─────────────────────────────────────────────────────────────┘
```

## SPI Communication

```
                    SPI Communication Protocol
    ┌─────────────────────────────────────────────────────────────┐
    │                                                             │
    │  ┌─────────────────────────────────────────────────────────┐ │
    │  │                SPI Frame Format                        │ │
    │  │                                                         │ │
    │  │  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐   │ │
    │  │  │  Addr   │  │  Data   │  │  Data   │  │  Data   │   │ │
    │  │  │ (8-bit) │  │ (8-bit) │  │ (8-bit) │  │ (8-bit) │   │ │
    │  │  └─────────┘  └─────────┘  └─────────┘  └─────────┘   │ │
    │  │     │           │           │           │              │ │
    │  │     │           │           │           │              │ │
    │  │     ▼           ▼           ▼           ▼              │ │
    │  │  ┌─────┐     ┌─────┐     ┌─────┐     ┌─────┐          │ │
    │  │  │ R/W │     │ MSB │     │ LSB │     │ CRC │          │ │
    │  │  │ Bit │     │     │     │     │     │(opt)│          │ │
    │  │  └─────┘     └─────┘     └─────┘     └─────┘          │ │
    │  └─────────────────────────────────────────────────────────┘ │
    │                                                             │
    │  ┌─────────────────────────────────────────────────────────┐ │
    │  │                SPI Timing Diagram                       │ │
    │  │                                                         │ │
    │  │  CS  ──┐                                           ┌──── │ │
    │  │        │                                           │     │ │
    │  │        └───────────────────────────────────────────┘     │ │
    │  │                                                         │ │
    │  │  SCLK ──┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ │ │
    │  │         │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │
    │  │         └─┘ └─┘ └─┘ └─┘ └─┘ └─┘ └─┘ └─┘ └─┘ └─┘ └─┘ └─┘ │ │
    │  │                                                         │ │
    │  │  MOSI ──┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ │ │
    │  │         │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │
    │  │         └─┘ └─┘ └─┘ └─┘ └─┘ └─┘ └─┘ └─┘ └─┘ └─┘ └─┘ └─┘ │ │
    │  │                                                         │ │
    │  │  MISO ──┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ │ │
    │  │         │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │
    │  │         └─┘ └─┘ └─┘ └─┘ └─┘ └─┘ └─┘ └─┘ └─┘ └─┘ └─┘ └─┘ │ │
    │  │                                                         │ │
    │  │  Bit:  0   1   2   3   4   5   6   7   8   9  10  11   │ │
    │  └─────────────────────────────────────────────────────────┘ │
    └─────────────────────────────────────────────────────────────┘
```

## Driver Architecture

```
                    MAX22200 Driver Architecture
    ┌─────────────────────────────────────────────────────────────┐
    │                                                             │
    │  ┌─────────────────────────────────────────────────────────┐ │
    │  │                Application Layer                        │ │
    │  │  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐   │ │
    │  │  │ Channel │  │ Current │  │ Timing  │  │  Fault  │   │ │
    │  │  │ Control │  │ Control │  │ Control │  │ Handling│   │ │
    │  │  └─────────┘  └─────────┘  └─────────┘  └─────────┘   │ │
    │  └─────────────────────────────────────────────────────────┘ │
    │                                                             │
    │  ┌─────────────────────────────────────────────────────────┐ │
    │  │                MAX22200 Driver Class                    │ │
    │  │  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐   │ │
    │  │  │ Channel │  │ Register│  │  Fault  │  │Statistics│   │ │
    │  │  │ Manager │  │ Manager │  │ Manager │  │ Manager │   │ │
    │  │  └─────────┘  └─────────┘  └─────────┘  └─────────┘   │ │
    │  │  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐   │ │
    │  │  │ Callback│  │  Config │  │  Status │  │  Utility │   │ │
    │  │  │ Manager │  │ Manager │  │ Manager │  │ Manager │   │ │
    │  │  └─────────┘  └─────────┘  └─────────┘  └─────────┘   │ │
    │  └─────────────────────────────────────────────────────────┘ │
    │                                                             │
    │  ┌─────────────────────────────────────────────────────────┐ │
    │  │                Hardware Abstraction Layer               │ │
    │  │  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐   │ │
    │  │  │   SPI   │  │ Register│  │  Bit    │  │  Error  │   │ │
    │  │  │Interface│  │  Access │  │ Manip.  │  │ Handling│   │ │
    │  │  └─────────┘  └─────────┘  └─────────┘  └─────────┘   │ │
    │  └─────────────────────────────────────────────────────────┘ │
    │                                                             │
    │  ┌─────────────────────────────────────────────────────────┐ │
    │  │                Platform SPI Implementation              │ │
    │  │  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐   │ │
    │  │  │   SPI   │  │   GPIO  │  │  Timer  │  │  Interrupt│  │ │
    │  │  │ Hardware│  │ Control │  │ Control │  │  Handler │  │ │
    │  │  └─────────┘  └─────────┘  └─────────┘  └─────────┘   │ │
    │  └─────────────────────────────────────────────────────────┘ │
    │                                                             │
    │  ┌─────────────────────────────────────────────────────────┐ │
    │  │                MAX22200 Hardware                        │ │
    │  │  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐   │ │
    │  │  │   SPI   │  │  Channel│  │  Current│  │  Fault  │   │ │
    │  │  │ Interface│  │ Drivers │  │ Sensing │  │ Detection│  │ │
    │  │  └─────────┘  └─────────┘  └─────────┘  └─────────┘   │ │
    │  └─────────────────────────────────────────────────────────┘ │
    └─────────────────────────────────────────────────────────────┘
```

## Current Regulation Modes

```
                    Current Regulation Modes
    ┌─────────────────────────────────────────────────────────────┐
    │                                                             │
    │  ┌─────────────────────────────────────────────────────────┐ │
    │  │                CDR Mode (Current Drive Regulation)      │ │
    │  │                                                         │ │
    │  │  ┌─────────┐    ┌─────────┐    ┌─────────┐             │ │
    │  │  │  HIT    │    │  HOLD   │    │ Current │             │ │
    │  │  │ Current │    │ Current │    │ Sense   │             │ │
    │  │  │ Control │    │ Control │    │ Feedback│             │ │
    │  │  └─────────┘    └─────────┘    └─────────┘             │ │
    │  │       │              │              │                  │ │
    │  │       └──────────────┼──────────────┘                  │ │
    │  │                      │                                 │ │
    │  │  ┌───────────────────▼───────────────────┐             │ │
    │  │  │            PWM Controller             │             │ │
    │  │  │  ┌─────────┐  ┌─────────┐  ┌─────────┐│             │ │
    │  │  │  │  HIT    │  │  HOLD   │  │  Error  ││             │ │
    │  │  │  │  Phase  │  │  Phase  │  │  Amp    ││             │ │
    │  │  │  └─────────┘  └─────────┘  └─────────┘│             │ │
    │  │  └───────────────────────────────────────┘             │ │
    │  │                      │                                 │ │
    │  │  ┌───────────────────▼───────────────────┐             │ │
    │  │  │            Half-Bridge Driver         │             │ │
    │  │  └───────────────────────────────────────┘             │ │
    │  └─────────────────────────────────────────────────────────┘ │
    │                                                             │
    │  ┌─────────────────────────────────────────────────────────┐ │
    │  │                VDR Mode (Voltage Drive Regulation)      │ │
    │  │                                                         │ │
    │  │  ┌─────────┐    ┌─────────┐    ┌─────────┐             │ │
    │  │  │ Voltage │    │  PWM    │    │  Duty   │             │ │
    │  │  │ Control │    │ Control │    │  Cycle  │             │ │
    │  │  └─────────┘    └─────────┘    └─────────┘             │ │
    │  │       │              │              │                  │ │
    │  │       └──────────────┼──────────────┘                  │ │
    │  │                      │                                 │ │
    │  │  ┌───────────────────▼───────────────────┐             │ │
    │  │  │            Half-Bridge Driver         │             │ │
    │  │  │  ┌─────────┐  ┌─────────┐  ┌─────────┐│             │ │
    │  │  │  │  High   │  │   Low   │  │  Output ││             │ │
    │  │  │  │  Side   │  │  Side   │  │  Filter ││             │ │
    │  │  │  └─────────┘  └─────────┘  └─────────┘│             │ │
    │  │  └───────────────────────────────────────┘             │ │
    │  └─────────────────────────────────────────────────────────┘ │
    └─────────────────────────────────────────────────────────────┘
```

## Bridge Configurations

```
                    Bridge Configuration Modes
    ┌─────────────────────────────────────────────────────────────┐
    │                                                             │
    │  ┌─────────────────────────────────────────────────────────┐ │
    │  │                Half-Bridge Mode                         │ │
    │  │                                                         │ │
    │  │  ┌─────────┐                    ┌─────────┐             │ │
    │  │  │   High  │                    │   Low   │             │ │
    │  │  │  Side   │                    │  Side   │             │ │
    │  │  │ Driver  │                    │ Driver  │             │ │
    │  │  └─────────┘                    └─────────┘             │ │
    │  │      │                              │                  │ │
    │  │      └────────────┬─────────────────┘                  │ │
    │  │                   │                                    │ │
    │  │  ┌────────────────▼────────────────┐                   │ │
    │  │  │            Output               │                   │ │
    │  │  │         (Single Ended)          │                   │ │
    │  │  └─────────────────────────────────┘                   │ │
    │  └─────────────────────────────────────────────────────────┘ │
    │                                                             │
    │  ┌─────────────────────────────────────────────────────────┐ │
    │  │                Full-Bridge Mode                        │ │
    │  │                                                         │ │
    │  │  ┌─────────┐                    ┌─────────┐             │ │
    │  │  │   High  │                    │   Low   │             │ │
    │  │  │  Side   │                    │  Side   │             │ │
    │  │  │ Driver  │                    │ Driver  │             │ │
    │  │  └─────────┘                    └─────────┘             │ │
    │  │      │                              │                  │ │
    │  │      └────────────┬─────────────────┘                  │ │
    │  │                   │                                    │ │
    │  │  ┌────────────────▼────────────────┐                   │ │
    │  │  │            Output A             │                   │ │
    │  │  └─────────────────────────────────┘                   │ │
    │  │                                                         │ │
    │  │  ┌─────────┐                    ┌─────────┐             │ │
    │  │  │   High  │                    │   Low   │             │ │
    │  │  │  Side   │                    │  Side   │             │ │
    │  │  │ Driver  │                    │ Driver  │             │ │
    │  │  └─────────┘                    └─────────┘             │ │
    │  │      │                              │                  │ │
    │  │      └────────────┬─────────────────┘                  │ │
    │  │                   │                                    │ │
    │  │  ┌────────────────▼────────────────┐                   │ │
    │  │  │            Output B             │                   │ │
    │  │  └─────────────────────────────────┘                   │ │
    │  └─────────────────────────────────────────────────────────┘ │
    │                                                             │
    │  ┌─────────────────────────────────────────────────────────┐ │
    │  │                Parallel Mode                           │ │
    │  │                                                         │ │
    │  │  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐   │ │
    │  │  │Channel 0│  │Channel 1│  │Channel 2│  │Channel 3│   │ │
    │  │  │ Driver  │  │ Driver  │  │ Driver  │  │ Driver  │   │ │
    │  │  └─────────┘  └─────────┘  └─────────┘  └─────────┘   │ │
    │  │      │              │              │              │   │ │
    │  │      └──────────────┼──────────────┼──────────────┘   │ │
    │  │                     │              │                  │ │
    │  │  ┌──────────────────▼──────────────▼──────────────────┐ │ │
    │  │  │                Combined Output                     │ │ │
    │  │  │            (Higher Current Capability)            │ │ │
    │  │  └───────────────────────────────────────────────────┘ │ │
    │  └─────────────────────────────────────────────────────────┘ │
    └─────────────────────────────────────────────────────────────┘
```

## Data Flow

```
                    Data Flow Through Driver
    ┌─────────────────────────────────────────────────────────────┐
    │                                                             │
    │  ┌─────────────────────────────────────────────────────────┐ │
    │  │                Application Call                         │ │
    │  │  driver.setHitCurrent(0, 500);                         │ │
    │  └─────────────────────────────────────────────────────────┘ │
    │                              │                              │
    │                              ▼                              │
    │  ┌─────────────────────────────────────────────────────────┐ │
    │  │                Parameter Validation                     │ │
    │  │  - Check channel number (0-7)                          │ │
    │  │  - Check current range (0-1023)                        │ │
    │  │  - Check driver state                                  │ │
    │  └─────────────────────────────────────────────────────────┘ │
    │                              │                              │
    │                              ▼                              │
    │  ┌─────────────────────────────────────────────────────────┐ │
    │  │                Register Access                          │ │
    │  │  - Read current register (0x20 + channel)              │ │
    │  │  - Update HIT current bits (bits 15-6)                 │ │
    │  │  - Preserve HOLD current bits (bits 5-0)               │ │
    │  └─────────────────────────────────────────────────────────┘ │
    │                              │                              │
    │                              ▼                              │
    │  ┌─────────────────────────────────────────────────────────┐ │
    │  │                SPI Communication                        │ │
    │  │  - Set CS low                                          │ │
    │  │  - Send register address + data                        │ │
    │  │  - Wait for completion                                 │ │
    │  │  - Set CS high                                         │ │
    │  └─────────────────────────────────────────────────────────┘ │
    │                              │                              │
    │                              ▼                              │
    │  ┌─────────────────────────────────────────────────────────┐ │
    │  │                Hardware Update                          │ │
    │  │  - MAX22200 updates internal registers                 │ │
    │  │  - New current setting takes effect                    │ │
    │  │  - ICS begins monitoring new current level             │ │
    │  └─────────────────────────────────────────────────────────┘ │
    │                              │                              │
    │                              ▼                              │
    │  ┌─────────────────────────────────────────────────────────┐ │
    │  │                Status Update                            │ │
    │  │  - Update driver statistics                             │ │
    │  │  - Check for faults                                     │ │
    │  │  - Return success status                                │ │
    │  └─────────────────────────────────────────────────────────┘ │
    └─────────────────────────────────────────────────────────────┘
```

These ASCII diagrams provide visual representations of the MAX22200 IC architecture, register layout, communication protocol, and driver structure, making it easier to understand the system design and implementation details.
