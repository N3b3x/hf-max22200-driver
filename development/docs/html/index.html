<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>HF-MAX22200 Driver: HF-MAX22200 Driver</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">HF-MAX22200 Driver<span id="projectnumber">&#160;0.1.0-dev</span>
   </div>
   <div id="projectbrief">HF-MAX22200 C++ Driver</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">HF-MAX22200 Driver </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_README"></a> <b>Portable C++20 driver for the MAX22200 octal solenoid and motor driver with SPI interface</b></p>
<p><a href="https://www.gnu.org/licenses/gpl-3.0"><img src="https://img.shields.io/badge/License-GPLv3-blue.svg" alt="License: GPL v3" style="pointer-events: none;" class="inline"/></a></p>
<h1><a class="anchor" id="autotoc_md1"></a>
üìö Table of Contents</h1>
<ol type="1">
<li>Overview</li>
<li>Features</li>
<li>Quick Start</li>
<li>Installation</li>
<li>API Reference</li>
<li>Examples</li>
<li>Documentation</li>
<li>Contributing</li>
<li>License</li>
</ol>
<h1><a class="anchor" id="autotoc_md2"></a>
üì¶ Overview</h1>
<blockquote class="doxtable">
<p>&zwj;<b>üìñ <a href="https://n3b3x.github.io/hf-max22200-driver/">üìöüåê Live Complete Documentation</a></b> - Interactive guides, examples, and step-by-step tutorials </p>
</blockquote>
<p><b>HF-MAX22200</b> is a portable C++20 driver for the <b>MAX22200</b> octal (eight-channel) solenoid and motor driver IC. The MAX22200 features eight half-bridges, each capable of handling up to 36V and 1A RMS, with integrated current sensing, current/voltage regulation, and comprehensive protection features.</p>
<p>The driver uses a CRTP-based <code>SpiInterface</code> for hardware abstraction, allowing it to run on any platform (ESP32, STM32, Arduino, etc.) with zero runtime overhead. It implements all major features from the MAX22200 datasheet including channel configuration, current/voltage regulation modes, integrated current sensing (ICS), fault detection, and callback support for event-driven programming.</p>
<h1><a class="anchor" id="autotoc_md3"></a>
‚ú® Features</h1>
<ul>
<li>‚úÖ <b>Eight Half-Bridges</b>: Each channel handles up to 36V and 1A RMS</li>
<li>‚úÖ <b>Current and Voltage Regulation</b>: Supports both CDR (Current Drive Regulation) and VDR (Voltage Drive Regulation) modes</li>
<li>‚úÖ <b>Integrated Current Sensing (ICS)</b>: Real-time current monitoring without external sense resistors</li>
<li>‚úÖ <b>Half-Bridge and Full-Bridge Modes</b>: Flexible bridge configurations</li>
<li>‚úÖ <b>HIT/HOLD Current Control</b>: Programmable hit current, hold current, and hit time</li>
<li>‚úÖ <b>Comprehensive Protection</b>: OCP, OL, DPM, UVLO, TSD, and fault registers</li>
<li>‚úÖ <b>Hardware Agnostic</b>: SPI interface for platform independence</li>
<li>‚úÖ <b>Modern C++</b>: C++20 with CRTP-based design</li>
<li>‚úÖ <b>Zero Overhead</b>: CRTP-based design for compile-time polymorphism</li>
<li>‚úÖ <b>Callback Support</b>: Event-driven programming with fault and state callbacks</li>
<li>‚úÖ <b>Statistics Tracking</b>: Runtime performance and error monitoring</li>
</ul>
<h1><a class="anchor" id="autotoc_md4"></a>
üöÄ Quick Start</h1>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="max22200_8hpp.html">max22200.hpp</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// 1. Implement the SPI interface (see platform_integration.md)</span></div>
<div class="line"><span class="keyword">class </span>MySpi : <span class="keyword">public</span> <a class="code hl_class" href="classmax22200_1_1SpiInterface.html">max22200::SpiInterface</a>&lt;MySpi&gt; {</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    <span class="keywordtype">void</span> transfer(<span class="keyword">const</span> uint8_t* tx, uint8_t* rx, <span class="keywordtype">size_t</span> len) {</div>
<div class="line">        <span class="comment">// Your SPI transfer implementation</span></div>
<div class="line">    }</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="comment">// 2. Create driver instance</span></div>
<div class="line">MySpi spi;</div>
<div class="line"><a class="code hl_class" href="classmax22200_1_1MAX22200.html">max22200::MAX22200</a> driver(spi);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// 3. Initialize</span></div>
<div class="line"><span class="keywordflow">if</span> (driver.Initialize() == <a class="code hl_enumvalue" href="namespacemax22200.html#a63bc0b5401ad8c7106ce140926eab27bae0aa021e21dddbd6d8cecec71e9cf564">max22200::DriverStatus::OK</a>) {</div>
<div class="line">    <span class="comment">// 4. Configure channel 0</span></div>
<div class="line">    <a class="code hl_struct" href="structmax22200_1_1ChannelConfig.html">max22200::ChannelConfig</a> config;</div>
<div class="line">    config.<a class="code hl_variable" href="structmax22200_1_1ChannelConfig.html#ac6d455474e1ec3559b8de60fe00b029a">enabled</a> = <span class="keyword">true</span>;</div>
<div class="line">    config.<a class="code hl_variable" href="structmax22200_1_1ChannelConfig.html#ad5e23fc3312df705ed4933dd8c0106d0">drive_mode</a> = <a class="code hl_enumvalue" href="namespacemax22200.html#a2b4eec1a1d40f726831b9fb75f74b591a96e2018b8ce480feee232b6c570aa376">max22200::DriveMode::CDR</a>;</div>
<div class="line">    config.<a class="code hl_variable" href="structmax22200_1_1ChannelConfig.html#a09724805d7724387b8cd9cac0aad3e23">hit_current</a> = 500;</div>
<div class="line">    config.<a class="code hl_variable" href="structmax22200_1_1ChannelConfig.html#a156989985bc3ca34f4692f7baf80e6ab">hold_current</a> = 200;</div>
<div class="line">    config.<a class="code hl_variable" href="structmax22200_1_1ChannelConfig.html#aefc7ca5063b6c9f50e23620f6de3567d">hit_time</a> = 1000;</div>
<div class="line">    </div>
<div class="line">    driver.<a class="code hl_function" href="classmax22200_1_1MAX22200.html#a4f408001924084364f6e85ee2a5cafc6">ConfigureChannel</a>(0, config);</div>
<div class="line">    driver.EnableChannel(0, <span class="keyword">true</span>);</div>
<div class="line">}</div>
<div class="ttc" id="aclassmax22200_1_1MAX22200_html"><div class="ttname"><a href="classmax22200_1_1MAX22200.html">max22200::MAX22200</a></div><div class="ttdef"><b>Definition</b> max22200.hpp:64</div></div>
<div class="ttc" id="aclassmax22200_1_1MAX22200_html_a4f408001924084364f6e85ee2a5cafc6"><div class="ttname"><a href="classmax22200_1_1MAX22200.html#a4f408001924084364f6e85ee2a5cafc6">max22200::MAX22200::ConfigureChannel</a></div><div class="ttdeci">DriverStatus ConfigureChannel(uint8_t channel, const ChannelConfig &amp;config)</div><div class="ttdoc">Configure a specific channel.</div><div class="ttdef"><b>Definition</b> MAX22200.cpp:215</div></div>
<div class="ttc" id="aclassmax22200_1_1SpiInterface_html"><div class="ttname"><a href="classmax22200_1_1SpiInterface.html">max22200::SpiInterface</a></div><div class="ttdoc">CRTP-based template interface for SPI communication.</div><div class="ttdef"><b>Definition</b> max22200_spi_interface.hpp:45</div></div>
<div class="ttc" id="amax22200_8hpp_html"><div class="ttname"><a href="max22200_8hpp.html">max22200.hpp</a></div><div class="ttdoc">Main driver class for MAX22200 octal solenoid and motor driver.</div></div>
<div class="ttc" id="anamespacemax22200_html_a2b4eec1a1d40f726831b9fb75f74b591a96e2018b8ce480feee232b6c570aa376"><div class="ttname"><a href="namespacemax22200.html#a2b4eec1a1d40f726831b9fb75f74b591a96e2018b8ce480feee232b6c570aa376">max22200::DriveMode::CDR</a></div><div class="ttdeci">@ CDR</div><div class="ttdoc">Current Drive Regulation.</div></div>
<div class="ttc" id="anamespacemax22200_html_a63bc0b5401ad8c7106ce140926eab27bae0aa021e21dddbd6d8cecec71e9cf564"><div class="ttname"><a href="namespacemax22200.html#a63bc0b5401ad8c7106ce140926eab27bae0aa021e21dddbd6d8cecec71e9cf564">max22200::DriverStatus::OK</a></div><div class="ttdeci">@ OK</div><div class="ttdoc">Driver is functioning normally.</div></div>
<div class="ttc" id="astructmax22200_1_1ChannelConfig_html"><div class="ttname"><a href="structmax22200_1_1ChannelConfig.html">max22200::ChannelConfig</a></div><div class="ttdoc">Channel configuration structure.</div><div class="ttdef"><b>Definition</b> max22200_types.hpp:62</div></div>
<div class="ttc" id="astructmax22200_1_1ChannelConfig_html_a09724805d7724387b8cd9cac0aad3e23"><div class="ttname"><a href="structmax22200_1_1ChannelConfig.html#a09724805d7724387b8cd9cac0aad3e23">max22200::ChannelConfig::hit_current</a></div><div class="ttdeci">uint16_t hit_current</div><div class="ttdoc">HIT current setting (0-1023)</div><div class="ttdef"><b>Definition</b> max22200_types.hpp:68</div></div>
<div class="ttc" id="astructmax22200_1_1ChannelConfig_html_a156989985bc3ca34f4692f7baf80e6ab"><div class="ttname"><a href="structmax22200_1_1ChannelConfig.html#a156989985bc3ca34f4692f7baf80e6ab">max22200::ChannelConfig::hold_current</a></div><div class="ttdeci">uint16_t hold_current</div><div class="ttdoc">HOLD current setting (0-1023)</div><div class="ttdef"><b>Definition</b> max22200_types.hpp:69</div></div>
<div class="ttc" id="astructmax22200_1_1ChannelConfig_html_ac6d455474e1ec3559b8de60fe00b029a"><div class="ttname"><a href="structmax22200_1_1ChannelConfig.html#ac6d455474e1ec3559b8de60fe00b029a">max22200::ChannelConfig::enabled</a></div><div class="ttdeci">bool enabled</div><div class="ttdoc">Channel enable state.</div><div class="ttdef"><b>Definition</b> max22200_types.hpp:63</div></div>
<div class="ttc" id="astructmax22200_1_1ChannelConfig_html_ad5e23fc3312df705ed4933dd8c0106d0"><div class="ttname"><a href="structmax22200_1_1ChannelConfig.html#ad5e23fc3312df705ed4933dd8c0106d0">max22200::ChannelConfig::drive_mode</a></div><div class="ttdeci">DriveMode drive_mode</div><div class="ttdoc">Drive mode (CDR or VDR)</div><div class="ttdef"><b>Definition</b> max22200_types.hpp:64</div></div>
<div class="ttc" id="astructmax22200_1_1ChannelConfig_html_aefc7ca5063b6c9f50e23620f6de3567d"><div class="ttname"><a href="structmax22200_1_1ChannelConfig.html#aefc7ca5063b6c9f50e23620f6de3567d">max22200::ChannelConfig::hit_time</a></div><div class="ttdeci">uint16_t hit_time</div><div class="ttdoc">HIT time setting (0-65535)</div><div class="ttdef"><b>Definition</b> max22200_types.hpp:70</div></div>
</div><!-- fragment --><p>For detailed setup, see Installation and Quick Start Guide.</p>
<h1><a class="anchor" id="autotoc_md5"></a>
üîß Installation</h1>
<ol type="1">
<li><b>Clone or copy</b> the driver files into your project</li>
<li><b>Implement the SPI interface</b> for your platform (see Platform Integration)</li>
<li><b>Include the header</b> in your code: <div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="max22200_8hpp.html">max22200.hpp</a>&quot;</span></div>
</div><!-- fragment --></li>
<li>Compile with a <b>C++20</b> or newer compiler</li>
</ol>
<p>For detailed installation instructions, see docs/installation.md.</p>
<h1><a class="anchor" id="autotoc_md6"></a>
üìñ API Reference</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Method   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>Initialize()</code>   </td><td class="markdownTableBodyNone">Initialize the driver    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>Deinitialize()</code>   </td><td class="markdownTableBodyNone">Safely shut down the driver    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>Reset()</code>   </td><td class="markdownTableBodyNone">Perform software reset    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>ConfigureChannel()</code>   </td><td class="markdownTableBodyNone">Configure a channel    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>EnableChannel()</code>   </td><td class="markdownTableBodyNone">Enable/disable a channel    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>GetChannelStatus()</code>   </td><td class="markdownTableBodyNone">Get channel status    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>GetFaultStatus()</code>   </td><td class="markdownTableBodyNone">Get fault status    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>ReadCurrent()</code>   </td><td class="markdownTableBodyNone">Read current via ICS    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>SetSleepMode()</code>   </td><td class="markdownTableBodyNone">Enable/disable sleep mode    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>SetFaultCallback()</code>   </td><td class="markdownTableBodyNone">Set fault callback function    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>GetStatistics()</code>   </td><td class="markdownTableBodyNone">Get driver statistics   </td></tr>
</table>
<p>For complete API documentation, see docs/api_reference.md.</p>
<h1><a class="anchor" id="autotoc_md7"></a>
üìä Examples</h1>
<p>For ESP32 examples, see the <a href="examples/esp32/">examples/esp32</a> directory. Additional examples for other platforms are available in the <a href="examples/">examples</a> directory.</p>
<p>Detailed example walkthroughs are available in docs/examples.md.</p>
<h1><a class="anchor" id="autotoc_md8"></a>
üìö Documentation</h1>
<p>For complete documentation, see the docs directory.</p>
<h1><a class="anchor" id="autotoc_md9"></a>
ü§ù Contributing</h1>
<p>Pull requests and suggestions are welcome! Please follow the existing code style and include tests for new features.</p>
<h1><a class="anchor" id="autotoc_md10"></a>
üìÑ License</h1>
<p>This project is licensed under the <b>GNU General Public License v3.0</b>. See the [LICENSE](LICENSE) file for details. </p>
</div></div><!-- PageDoc -->
<a href="doxygen_crawl.html"/>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
